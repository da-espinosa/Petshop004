{% extends 'core/base.html' %}
{% load static %}
{% block contenido %}
<div class="col-lg-12 mb-5 mb-lg-0 text-center">
    <h1 class="my-5 display-4">
        Historial de <br />
        <span class="text-primary">Compras</span>
    </h1>
</div>


<script
  type="text/javascript"
  src="https://cdnjs.cloudflare.com/ajax/libs/mdb-ui-kit/6.4.0/mdb.min.js"
></script>

<div class="row">
    {% for compra in listado %}
    {% if forloop.counter0|divisibleby:3 %}
    </div>
    <div class="row">
    {% endif %}

    <div class="col">
        <div class="container">
            <section class="mx-auto my-5" style="max-width: 23rem;">
                <div class="card chart-card">
                    <div class="card-body pb-0">
                        <h5 class="card-title font-weight-bold">{{ compra.codigo }}</h5>
                        <h5 class="card-title font-weight-bold" style="color: blue;">{{ compra.nombreEstado }}</h5>
                        <div class="d-flex justify-content-between"></div>
                    </div>
                    <ul class="nav nav-tabs nav-fill mb-3" role="tablist">
                        <li class="nav-item ms-0" role="presentation">
                            <a class="nav-link active" id="ex1-tab-1-{{ compra.id }}" data-mdb-toggle="tab"
                                href="#ex1-tabs-1-{{ compra.id }}" role="tab" aria-controls="ex1-tabs-1-{{ compra.id }}"
                                aria-selected="true">Informacion</a>
                        </li>
                        <li class="nav-item" role="presentation">
                            <a class="nav-link" id="ex1-tab-2-{{ compra.id }}" data-mdb-toggle="tab"
                                href="#ex1-tabs-2-{{ compra.id }}" role="tab" aria-controls="ex1-tabs-2-{{ compra.id }}"
                                aria-selected="false">Detalle</a>
                        </li>
                        <li class="nav-item" role="presentation">
                            <a class="nav-link" id="ex1-tab-3-{{ compra.id }}" data-mdb-toggle="tab"
                                href="#ex1-tabs-3-{{ compra.id }}" role="tab" aria-controls="ex1-tabs-3-{{ compra.id }}"
                                aria-selected="false">Ver mas..</a>
                        </li>
                    </ul>
                    <div class="card-body">
                        <div class="tab-content" id="ex1-content">
                            <div class="tab-pane fade show active" id="ex1-tabs-1-{{ compra.id }}" role="tabpanel"
                                aria-labelledby="ex1-tab-1-{{ compra.id }}">
                                <div>
                                    <h6 class="card-title font-weight-bold">Informaci贸n cliente</h6>
                                </div>
                                <p class="card-text mb-4">Nombre cliente: {{ compra.cliente.nombre }}</p>
                                <p class="card-text mb-4">Contacto: {{ compra.contacto }}</p>
                                <p class="card-text mb-4">Direcci贸n: {{ compra.direccion }}</p>
                                <div>
                                    <h6 class="card-title font-weight-bold">Informaci贸n de pedido</h6>
                                </div>
                                <p class="card-text mb-4">C贸digo de pedido #{{ compra.codigo }}</p>
                                <p class="card-text mb-4">Fecha de pedido {{ compra.fecha }}</p>
                            </div>
                            <div class="tab-pane fade" id="ex1-tabs-2-{{ compra.id }}" role="tabpanel"
                                aria-labelledby="ex1-tab-2-{{ compra.id }}">
                                <p align="justify" class="font-small text-muted mx-1">
                                    <ol class="list-group list-group">
                                        {% for carrito in compra.cliente.carrito_set.all %}
                                        <li class="list-group-item d-flex justify-content-between align-items-start">
                                            <div class="ms-2 me-auto">
                                                <div class="fw-bold">{{ carrito.producto.nombre }}</div>
                                                Cantidad:
                                                <span class="badge bg-primary rounded-pill">{{ carrito.cantidad }}</span>
                                                <br>
                                                Precio:
                                                <span
                                                    class="badge bg-primary rounded-pill">${{ carrito.producto.precio }}</span>
                                            </div>
                                        </li>
                                        {% endfor %}
                                    </ol>
                                </p>
                                <p align="justify" class="font-small text-muted mx-1">
                                </p>
                            </div>
                            <div class="tab-pane fade" id="ex1-tabs-3-{{ compra.id }}" role="tabpanel"
                                aria-labelledby="ex1-tab-3-{{ compra.id }}">
                                <img class="img-fluid z-depth-1 rounded mb-3" alt="sample image"
                                    src="https://mdbootstrap.com/img/Photos/Others/intro1.jpg" />
                                <p align="justify" class="font-small text-muted mx-1">
                                    Lorem ipsum dolor sit amet, consectetur adipisicing elit. Nihil odit magnam minima,
                                    soluta doloribus reiciendis molestiae placeat unde eos molestias. Quisquam aperiam,
                                    pariatur. Tempora, placeat ratione porro voluptate odit minima at ipsum sit amet.
                                </p>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </div>
    </div>

    {% if forloop.last %}
</div>
{% endif %}
{% endfor %}
</div>

{% endblock %}
